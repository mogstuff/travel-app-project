var Client=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function o(e){e.preventDefault();try{let e=document.getElementById("search_txt").value;if(e.length<3)throw"search cannot be null";console.log("search for: "+e);let t=document.getElementById("countriesDD").value;if(console.log("Selected Country is : "+t),"none"===t)throw"please select a country";let n=new Date(document.getElementById("dpFromDate").value);if(console.log("From: "+n),n<new Date)throw"Arrival Date cannot be before tomorrow";let o=new Date(document.getElementById("dpToDate").value);if(console.log("To: "+o),o<=n)throw"Departure Date cannot be before or on same day as Arrival";a("http://localhost:8081/travelinfo",{city:e,countryName:t,arrivalDate:n,departureDate:o})}catch(e){r(e)}}function r(e){let t=document.getElementById("validation");t.innerHTML="";let n=document.createElement("p");n.classList.add("error"),n.innerText=e,t.appendChild(n)}n.r(t),n.d(t,"handleSubmit",(function(){return o})),n.d(t,"loadCountries",(function(){return c})),n.d(t,"selectCountry",(function(){return u}));const a=async(e="",t={})=>{const n=await fetch(e,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});try{const e=await n.json();return console.info("response from posting data to Api: "),console.log(e),l(e),e}catch(e){r(e),console.error("error posting data to API",e)}},l=async e=>{document.getElementById("results").innerText=JSON.stringify(e)},c=async()=>{if(null!=localStorage.getItem("countriesList")&&localStorage.getItem("countriesList"))return console.log("countries loaded"),void i();const e=await fetch("https://restcountries.eu/rest/v2/all");try{const t=await e.json();localStorage.setItem("countriesList",JSON.stringify(t)),i()}catch(e){console.error("error fetching countries")}};function i(){let e=document.getElementById("countriesDD"),t=JSON.parse(localStorage.getItem("countriesList"));Object.entries(t).forEach(t=>{let n=t[1].name,o=document.createElement("option");o.value=n,o.text=n,e.appendChild(o)})}(()=>{let e=new Date,t=document.getElementById("dpFromDate");t.min=e,e.setDate(e.getDate()+1),t.value=e.toISOString().slice(0,10);let n=document.getElementById("dpToDate"),o=new Date;o.setDate(o.getDate()+2),n.value=o.toISOString().slice(0,10)})(),c();const u=()=>{document.getElementById("countriesDD").addEventListener("change",()=>{"none"!=document.getElementById("countriesDD").value&&(document.getElementById("validation").innerHTML="")})};u()}]);